{% extends 'base.html.twig' %}

{% block title %}Hello HomeController!{% endblock %}

{% block body %}
<main>
    <section class="intro">
        <div class="text-block upper">
            <h1 class="intro-header">Bienvenue sur STRASVTC</h1>
            <p>
    
                Bienvenue sur notre site !
    
                Nous sommes ravis de vous proposer un service unique de réservation de chauffeurs privés, où vous avez le pouvoir de choisir le chauffeur qui vous accompagnera lors de vos trajets. C’est cette flexibilité qui fait toute la différence et ajoute une touche d’originalité à votre expérience avec nous.
                
                Pour garantir un service de qualité, nous vous recommandons de prévoir votre réservation au moins un jour à l’avance.</p>
        </div>
    
<div class="mapAndForm">
    <div class="form-container">

        <form action="{{ path('store_route_data') }}" method="post" onsubmit="return validateForm()">
            <input type="hidden" name="_csrf_token" value="{{ csrf_token('store_route_data') }}">
            <div class="form-group">
                <label for="departure">Point de Départ</label>
                <input type="text" id="departure" name="departure" placeholder="Point de Départ">
                <ul id="departure-suggestions"></ul>
                <input type="hidden" id="startLat" name="startLat">
                <input type="hidden" id="startLng" name="startLng">
                <input type="hidden" id="startAddress" name="startAddress">
            </div>
            <div class="form-group">
                <label for="destination">Destination</label>
                <input type="text" id="destination" name="destination" placeholder="Destination">
                <ul id="destination-suggestions"></ul>
                <input type="hidden" id="endLat" name="endLat">
                <input type="hidden" id="endLng" name="endLng">
                <input type="hidden" id="endAddress" name="endAddress">
                
            </div>
            <div class="form-group">
                <label>Choix du Véhicule</label>
                <div class="vehicle-buttons">
                    <button type="button" class="vehicle-btn" data-vehicle="Berline">Berline</button>
                    <button type="button" class="vehicle-btn" data-vehicle="Van">Van</button>
                    <input type="hidden" name="vehicle" id="selectedVehicle">
                </div>
            </div>

            <label for="date">Date et heure de depart</label>
            <div class="form-group info-icon-container">
                <input type="datetime-local" id="date" name="date" placeholder="Choisissez la date" class="date-input form-date">
                <span class="info-icon">
                    <i class="fa-solid fa-question icon"></i>
                    <div class="hidden-info">Vous pouvez réserver une course à partir de demain.</div>
                </span>
            </div>
            <div class="form-group">
                <label for="passengers">Nombre de passagers</label>
                <select id="passengers" name="passengers">
                    <option value="" disabled selected>Choisissez</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                </select>
            </div>

            <div class="form-groupe">
                <input type="hidden" id="clientTarif" name="clientTarif">
                <input type="hidden" id="clientDuration" name="clientDuration">
                <input type="hidden" id="clientDistance" name="clientDistance">
            </div>

            <div class="form-group">
                <button id="findChauffeurLink" class="btn" type="submit">Trouver un Chauffeur</button>
            </div>

        </form>
    </div>

    <div id="itinerary" style="display: none;">
        <h3>Details d'itineraire</h3>
        <div id="itinerary-steps"></div>
    </div>

    <div id="map"></div>

</div>
</section>

<section>
<div class="textAndImage">
    
        <div class="text-block lower">
            <h2>Votre Chauffeur Privé : Départs de Strasbourg vers Toutes Destinations en France et en Europe</h2>
            <p>Nos départs sont principalement basés à Strasbourg et ses environs, allant de Sélestat à Niederbronn-les-Bains. Nous couvrons toutes les destinations, que ce soit en France ou en Europe, avec Strasbourg comme point de départ.
            
                Profitez de la liberté de choisir et voyagez en toute sérénité avec nous ! </p><br>
            
            <p>Besoin d'un transport pour la gare ou l'aéroport ?
                Vous avez un événement à célébrer ou un rendez-vous d'affaires important ?
                Peu importe l'occasion, un chauffeur professionnel et dédié est à votre disposition pour vous accompagner avec confort et style.</p>
        </div>

    <div id="slideShow">
        <div id="splide" class="splide">
            <div class="splide__track">
                <ul class="splide__list">
                    <li class="splide__slide"><img src="{{asset('/images/chauffeurs/Chauffeur-Driver-Customer-Care-Course-1024x683.jpg')}}" alt="Image thematique de chauffeur VTC" style="width: 100%;"></li>
                    <li class="splide__slide"><img src="{{ asset('/images/chauffeurs/vehicule-chauffeur-conseil-europe-720x480.jpg')}}" alt="Image thematique de chauffeur VTC" style="width: 100%;"></li>
                    <li class="splide__slide"><img src="{{ asset('images/chauffeurs/Mers.jpg')}}" alt="Image thematique de chauffeur VTC" style="width: 100%;"></li>
                </ul>
            </div>
        </div>
    </div>
</div>
</section>
<section class="services-section">
    <div class="service-header">
        <h2>SERVICES</h2>
    </div>
    <div class="services-grid">
        <div class="service">
            <a href="{{ path('app_services')}}#gare"><img src="{{asset('/images/5698669435-1b639cd0c0-k.jpg')}}" alt="Service Gare"></a>
            <div class="service-text">
                <h3>Service Gare</h3>
                <p>Votre chauffeur pour vos trajets vers les gares.</p>
            </div>
        </div>
        <div class="service">
            <a href="{{ path('app_services')}}#aeroport"><img src="{{asset('/images/aeroport-barcelone-1.jpg')}}" alt="Service Aéroport"></a>
            <div class="service-text">
                <h3>Service Aéroport</h3>
                <p>Navette rapide et confortable pour l'aéroport.</p>
            </div>
        </div>
        <div class="service">
            <a href="{{ path('app_services')}}#evenement"><img src="{{asset('/images/comment_assurer_securite_evenement.jpg')}}" alt="Service Événement"></a>
            <div class="service-text">
                <h3>Service Événement</h3>
                <p>Chauffeurs dédiés pour vos événements spéciaux.</p>
            </div>
        </div>
        <div class="service">
            <a href="{{ path('app_services')}}#business"><img src="{{asset('/images/skyscraper.webp')}}" alt="Service Business"></a>
            <div class="service-text">
                <h3>Mise a Disposition</h3>
                <p>Transports professionnels haut de gamme.</p>
            </div>
        </div>
    </div>    
</section>

<section class="personnel">
    <h2 class="personnel-header">Faites connaisance avec notre équipe!</h2>
    <div class="blockPersonnes">
        <div class="personne">
            <div class="imgAndIcones">
                <img src="{{asset('/images/person1.png') }}" alt="Anna G. White">
                <div class="iconesBlock">
                    <div class="iconesPersonne"><a href="https://www.facebook.com/" target="_blank"><i class="fa-brands fa-facebook-f"></i></a></div>
                    <div class="iconesPersonne"><a href="https://twitter.com/" target="_blank"><i class="fa-brands fa-twitter"></i></a></div>
                    <div class="iconesPersonne"><a href="https://www.skype.com/" target="_blank"><i class="fa-brands fa-skype"></i></a></div>
                </div>
            </div>
            <p>Anna G. White</p>
            <p class="petitTexte2">PDG/Fondatrice</p>
        </div>
        <div class="personne">
            <div class="imgAndIcones">
                <img src="{{asset('/images/person2.png') }}" alt="william S. Blay">
                <div class="iconesBlock">
                    <div class="iconesPersonne"><a href="https://www.facebook.com/" target="_blank"><i class="fa-brands fa-facebook-f"></i></a></div>
                    <div class="iconesPersonne"><a href="https://twitter.com/" target="_blank"><i class="fa-brands fa-twitter"></i></a></div>
                    <div class="iconesPersonne"><a href="https://www.skype.com/" target="_blank"><i class="fa-brands fa-skype"></i></a></div>
                </div>
            </div>
            <p>William S. Blay</p>
            <p class="petitTexte2">PDG/Co-Foncdateur</p>
        </div>
        <div class="personne">
            <div class="imgAndIcones">
                <img src="{{asset('/images/person3.png') }}" alt="Maria B. Morales">
                <div class="iconesBlock">
                    <div class="iconesPersonne"><a href="https://www.facebook.com/" target="_blank"><i class="fa-brands fa-facebook-f"></i></a></div>
                    <div class="iconesPersonne"><a href="https://twitter.com/" target="_blank"><i class="fa-brands fa-twitter"></i></a></div>
                    <div class="iconesPersonne"><a href="https://www.skype.com/" target="_blank"><i class="fa-brands fa-skype"></i></a></div>
                </div>
            </div>
            <p>Maria B. Morales</p>
            <p class="petitTexte2">Web Designer</p>
        </div>
        <div class="personne">
            <div class="imgAndIcones">
                <img src="{{asset('/images/person4.png') }}" alt="Luke L.Johnston">
                <div class="iconesBlock">
                    <div class="iconesPersonne"><a href="https://www.facebook.com/" target="_blank"><i class="fa-brands fa-facebook-f"></i></a></div>
                    <div class="iconesPersonne"><a href="https://twitter.com/" target="_blank"><i class="fa-brands fa-twitter"></i></a></div>
                    <div class="iconesPersonne"><a href="https://www.skype.com/" target="_blank"><i class="fa-brands fa-skype"></i></a></div>                </div>
            </div>
            <p>Luke L.Johnston</p>
            <p class="petitTexte2">Web Développeur</p>
        </div>
    </div>
    <div class="personnes-text">
        <p>Basée à Strasbourg, StrasVTC est née de la collaboration de plusieurs étudiants animés par une ambition commune : révolutionner le transport privé en apportant une véritable valeur ajoutée à chaque course. Ce projet a vu le jour avec une idée simple mais puissante : offrir un service de transport personnalisé, fiable et de qualité, tout en intégrant des solutions modernes et écoresponsables
            fais un deuximem paragraphe, et dis un truc du genre on est ouvert pour la collaboration </p>
        <p>Nous croyons en la force de la collaboration pour améliorer nos services. StrasVTC est ouvert à toute opportunité de partenariat avec des professionnels ou entreprises pour enrichir l'expérience de nos clients et innover ensemble.N'hésitez pas à nous <a href="{{path('app_contact')}}">contacter !</a></p>
    </div>
</section>  
</main>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        new Splide('#splide',{
            type:'loop',
            perPage:1,
            autoplay:true,
        }).mount();
        const vehicleButtons = document.querySelectorAll('.vehicle-btn');
        const nbPassagerSelect = document.getElementById('passengers');
        const dateDepartInput = document.getElementById('date');

        const nbPassagers = {
            'Van':[1,2,3,4,5,6,7],
            'Berline':[1,2,3,4],
            'Default':[1,2,3,4,5,6,7],
        };
        if (dateDepartInput) {
            const today = new Date();
        
            // Créer une nouvelle date pour définir la date minimale à aujourd'hui + 1 jour
            const tomorrow = new Date(today);
            //setDate() pour définir la date du jour
            //getDate() pour récupérer le jour 
            tomorrow.setDate(today.getDate() + 1);
        
            // Formater la date au format 'YYYY-MM-DDTHH:mm'
            const year = tomorrow.getFullYear();//recupère l'année
            // padStart() pour ajouter un zéro si nécessaire, par exemple 01/09, 02/07, etc.
            const month = String(tomorrow.getMonth() + 1).padStart(2, '0'); // Les mois sont de 0 à 11
            const day = String(tomorrow.getDate()).padStart(2, '0');
            const hours = String(tomorrow.getHours()).padStart(2, '0');
            const minutes = String(tomorrow.getMinutes()).padStart(2, '0');
        
            const minDateTime = `${year}-${month}-${day}T${hours}:${minutes}`;
        
            // Définir la date minimale dans le champ input
            dateDepartInput.setAttribute('min', minDateTime);
        }

        vehicleButtons.forEach(function(button) {
            button.addEventListener('click', function() {
                // recup le type de véhicule
                const vehicule = button.getAttribute('data-vehicle');
    
                // vider la selection actuelle
                nbPassagerSelect.innerHTML = '<option value="" disabled selected>Choisissez</option>';
    
                // recup les options de passagers pour ce type de véhicule
                const options = nbPassagers[vehicule] || nbPassagers['default'];
    
                // remplir le select
                options.forEach(function(option) {
                    const opt = document.createElement('option');
                    opt.value = option;
                    opt.textContent = option;
                    nbPassagerSelect.appendChild(opt);
                });
    
                // souligne le bouton sélectionné
                vehicleButtons.forEach(btn => btn.classList.remove('selected')); 
                button.classList.add('selected');
            });
        });
    });

    function validateForm() {
        var departure = document.getElementById('departure').value;
        var destination = document.getElementById('destination').value;
        var selectedVehicle = document.querySelector('.vehicle-btn.active');
        var passengers = document.getElementById('passengers').value;

        if (departure === '' || destination === '' || !selectedVehicle || passengers === '') {
            alert('Veuillez remplir tous les champs et sélectionner un véhicule.');
            return false; // Empêche la soumission du formulaire
        }

        return true; // Permet la soumission normale du formulaire
    }

    // Ajoutez un écouteur d'événements pour capturer le clic sur le bouton véhicule
    document.querySelectorAll('.vehicle-btn').forEach(function(button) {
        button.addEventListener('click', function() {
            document.querySelectorAll('.vehicle-btn').forEach(function(btn) {
                btn.classList.remove('active');
            });
            button.classList.add('active');
            const vehicleType = document.getElementById('selectedVehicle').value = button.getAttribute('data-vehicle');
            console.log(vehicleType);
        });
    });
</script>

{% endblock %}
